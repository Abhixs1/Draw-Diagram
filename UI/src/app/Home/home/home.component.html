<div class="dashboard-wrapper">
  <!-- Updated Header -->
<!-- Header -->
<header class="header">
  <img src="assets/logo-mavim.png" alt="Logo" class="logo" />

  <div class="header-right">
  <ng-container *ngIf="isProfileLoaded">
    <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-btn">
      <img [src]="userPhotoUrl" alt="Profile" class="user-pic" *ngIf="userPhotoUrl">
    </button>
  </ng-container>


    <mat-menu #userMenu="matMenu" class="profile-dropdown">
      <div class="profile-card">
        <img [src]="userPhotoUrl" alt="Profile" class="profile-avatar" />
        <div class="profile-info">
          <div class="profile-name">{{ userName }}</div>
          <div class="profile-email">{{ userPrincipalName }}</div>
          <div class="profile-links">
            <!-- <a href="https://myaccount.microsoft.com/?ref=MeControl">View account</a> -->
          </div>
        </div>
        <button class="signout-btn" (click)="logout()">Sign out</button>
      </div>
    </mat-menu>
  </div>
</header>


  <!-- Sidebar -->
  <aside class="sidebar">
    <button class="nav-button active">Home</button>
    <button class="nav-button" [routerLink]="['/home/studio']">Studio</button>
  </aside>

  <!-- Main Content -->
  <main class="main">
    <div class="content-card">
      <h1>Hi, Abhishek</h1>
      <h3>Jump into something new</h3>
<div class="template-gallery">
  <div class="word-style-card" *ngFor="let template of templates" (click)="loadTemplate(template)">
    <div class="card-top" [innerHTML]="template.safeIcon">
    </div>
    <div class="card-bottom">
      <div class="doc-title">{{ template.title }}</div>
    </div>
  </div>
</div>

      <h3>Recent Documents</h3>
<div class="diagram-gallery">
  <!-- Blank Document Card -->
  <div class="word-style-card" [routerLink]="['/home/studio']">
    <div class="card-top">
      <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24">
        	<g fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.8">
	<path fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5" d="M4 20h4L18.5 9.5a2.828 2.828 0 1 0-4-4L4 16zm9.5-13.5l4 4M16 19h6m-3-3v6" />
  </g>
</svg>
    </div>
    <div class="card-bottom">
      <div class="doc-title">Blank Document</div>
    </div>
  </div>

<!-- Cards for Diagrams -->
<div
  class="word-style-card"
  *ngFor="let diagram of diagrams"
  (click)="openDiagramCard(diagram)"
>
  <div class="card-top">
<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
  <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
    <!-- Main presentation board -->
    <path d="M6.857 32S6 27.167 6 17.5c0-4.203.162-7.362.345-9.59c.209-2.54 2.203-4.42 4.746-4.575C13.88 3.166 18.116 3 24 3s10.12.166 12.909.335c2.543.155 4.537 2.036 4.746 4.575c.183 2.228.345 5.387.345 9.59c0 9.667-.857 14.5-.857 14.5"
          stroke="#667eea" fill="#f7fafc" />
   
    <!-- Image/chart area -->
    <path d="M41.819 24.82a100 100 0 0 0-1.364-1.349c-4.444-4.313-7.596-6.475-9.453-7.529a4 4 0 0 0-4.003 0c-1.858 1.054-5.009 3.216-9.453 7.53c-3.81 3.696-6.193 6.573-7.626 8.529m-6.87 1.622c.12-.942.993-1.4 1.943-1.43C7.357 32.12 12.91 32 24 32s16.643.12 19.007.194c.95.03 1.824.487 1.942 1.43q.05.373.051.876c0 .337-.02.627-.05.877c-.12.942-.993 1.4-1.943 1.43C40.643 36.88 35.09 37 24 37s-16.643-.12-19.007-.194c-.95-.03-1.824-.487-1.942-1.43A7 7 0 0 1 3 34.5c0-.337.02-.627.05-.877"
          stroke="#ed64a6" fill="#fed7e2" />
   
    <!-- Left tripod leg -->
    <path d="m10.845 36.926l-3.291 6.613c-.285.572.034 1.26.668 1.344c1.624.216 3.191.092 4.192-.043c.711-.096 1.329-.506 1.754-1.085l4.965-6.763"
          stroke="#667eea" />
   
    <!-- Center tripod leg -->
    <path d="m1.174.003c.207 2.706.467 5.288.609 6.63c.064.605.424 1.118 1.024 1.224c.462.082 1.128.15 2.061.15s1.599-.068 2.06-.15c.6-.106.961-.619 1.025-1.225c.142-1.34.402-3.923.61-6.629"
          stroke="#667eea" transform="translate(18.826 36.926)" />
   
    <!-- Right tripod leg -->
    <path d="m1.171-.003l4.966 6.763c.425.579 1.042.99 1.753 1.085c1 .135 2.568.259 4.193.043c.633-.084.952-.772.667-1.344l-3.291-6.613"
          stroke="#667eea" transform="translate(27.997 36.929)" />
   
    <!-- Circular element (person or logo) -->
    <circle cx="16" cy="13" r="4" stroke="#fbb6ce" fill="#ffffff" stroke-width="2" />
  </g>
</svg>

  </div>
  <div class="card-bottom">
    <div class="doc-title">{{ diagram.name }}</div>
    <div class="doc-meta">Version: {{ diagram.version }}</div>
    <div class="doc-meta">{{ diagram.createdAt | date: 'short' }}</div>
    <div class="doc-meta" *ngIf="diagram.description">{{ diagram.description }}</div>
    
    <!-- âœ… Delete Button (stops card click event) -->
    <button
      class="delete-btn"
      (click)="deleteDiagram(diagram); $event.stopPropagation()"
    >
      Delete
    </button>
  </div>
</div>

</div>

    </div>
  </main>
</div>
